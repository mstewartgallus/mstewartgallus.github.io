"use strict";(self.webpackChunkwords_to_kick_your_teeth_out=self.webpackChunkwords_to_kick_your_teeth_out||[]).push([[599],{1599:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var l=t(7294),r=t(4218),s=t(5893);const o=e=>{let{children:n,heading:t,...o}=e;const c=(0,l.useId)();return(0,s.jsx)("section",{"aria-labelledby":c,...o,children:(0,s.jsxs)(r.Z,{children:[(0,s.jsx)("header",{id:c,children:(0,s.jsx)("hgroup",{children:t})}),n]})})};var c=t(7027),i=t(7158);const d=e=>{let{url:n,display_name:t,acct:l}=e;const r=""!==t?t:l;return(0,s.jsx)("address",{children:(0,s.jsx)(i.A,{rel:"nofollow",href:n,children:r})})},a=e=>{let{url:n,account:t,content:r,children:o}=e;const c=(e=>(0,l.useMemo)((()=>(e=>`<!DOCTYPE html>\n<html>\n  <head>\n    <base target="_parent">\n    <meta name="color-scheme" content="dark light">\n    <link rel="stylesheet" href="/sandbox.css">\n  </head>\n  <body>${e}</body>\n</html>`)(e)),[e]))(r),{0:a,1:u}=(0,l.useState)(!1),m=(0,l.useCallback)((e=>{u(!0)}),[]),h=a?"comment-module--loaded--961c0":"comment-module--unloaded--35fb3";return(0,s.jsxs)("article",{className:"comment-module--comment--13767",children:[(0,s.jsxs)("header",{className:"comment-module--header--3b239",children:[(0,s.jsx)(d,{...t}),(0,s.jsx)(i.A,{rel:"nofollow",href:n,children:"#"})]}),(0,s.jsx)("iframe",{className:"comment-module--iframe--0ce46 "+h,allow:"",sandbox:"allow-top-navigation-by-user-activation",srcDoc:c,onLoad:m}),(0,s.jsx)("div",{children:o})]})};const u=e=>{let{children:n}=e;return(0,s.jsx)("div",{className:"comment-list-module--list--556f9",children:n})},m=e=>{let{children:n}=e;return(0,s.jsx)("div",{className:"comment-list-module--item--9f430",children:n})},h=e=>{let{id:n,url:t,content:l,account:r}=e;return[n,{url:t,account:r,content:l}]};function x(e){let{id:n,account:t,url:l,content:r,replies:o}=e;return(0,s.jsx)(a,{account:t,url:l,content:r,children:(0,s.jsx)(u,{children:o.map((e=>(0,s.jsx)(m,{children:(0,s.jsx)(x,{...e})},e.id)))})})}const f=e=>{let{host:n,id:t}=e;const{0:r,1:o}=(0,l.useState)(null);return(0,l.useEffect)((()=>{let e=!1;return(async l=>{const r=new Request(new URL(`/api/v1/statuses/${t}/context`,`https://${n}`)),s=await fetch(r);if(!s.ok)throw new Error(`${s.status} ${s.statusText}`);if(e)return;const c=await s.json();if(e)return;const i=null!==(l=null==c?void 0:c.descendants)&&void 0!==l?l:null,d=(e=>e?new Map(e.map(h)):null)(i),a=(e=>{if(!e)return null;const n=new Map(e.map((e=>[e.in_reply_to_id,[]])));for(const{in_reply_to_id:t,id:l}of e)n.get(t).push(l);return n})(i),u=(e=>{var n;let{id:t,comments:l,replies:r}=e;return(null!==(n=r.get(t))&&void 0!==n?n:[]).map((function e(n){var t;return{id:n,...l.get(n),replies:(null!==(t=r.get(n))&&void 0!==t?t:[]).map(e)}}))})({id:t,comments:d,replies:a});o(u)})(),()=>e=!0}),[n,t]),r?(0,s.jsx)(u,{children:r.map((e=>(0,s.jsx)(m,{children:(0,s.jsx)(x,{...e})},e.id)))}):"Loading..."};var j=e=>{let{host:n,id:t}=e;return(0,s.jsx)(o,{heading:(0,s.jsx)(c.vJ,{id:"comments",children:"Comments"}),children:(0,s.jsx)(f,{host:n,id:t})})}}}]);
//# sourceMappingURL=599-107cd7971f9e08ef278d.js.map