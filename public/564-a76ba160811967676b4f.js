"use strict";(self.webpackChunkwords_to_kick_your_teeth_out=self.webpackChunkwords_to_kick_your_teeth_out||[]).push([[564],{3658:function(e,t,n){n.r(t),n.d(t,{CommentsClient:function(){return m},default:function(){return h}});var l=n(7294),r=n(7410),o=n(5893);const s=e=>{let{url:t,display_name:n,acct:l}=e;const s=""!==n?n:l;return(0,o.jsx)("address",{children:(0,o.jsx)(r.A,{rel:"nofollow",href:t,children:s})})};var c=e=>{let{url:t,account:n,content:c,children:a}=e;const i=(e=>(0,l.useMemo)((()=>(e=>'<!DOCTYPE html>\n<html>\n  <head>\n    <base target="_parent">\n    <meta name="color-scheme" content="dark light">\n    <link rel="stylesheet" href="/sandbox.css">\n  </head>\n  <body>'+e+"</body>\n</html>")(e)),[e]))(c),{0:u,1:d}=(0,l.useState)(!1),m=(0,l.useCallback)((e=>{d(!0)}),[]),h=u?"comment-module--loaded--961c0":"comment-module--unloaded--35fb3";return(0,o.jsxs)("article",{className:"comment-module--comment--13767",children:[(0,o.jsxs)("header",{className:"comment-module--header--3b239",children:[(0,o.jsx)(s,{...n}),(0,o.jsx)(r.A,{rel:"nofollow",href:t,children:"#"})]}),(0,o.jsx)("iframe",{className:"comment-module--iframe--0ce46 "+h,allow:"",sandbox:"allow-top-navigation-by-user-activation",srcDoc:i,onLoad:m}),(0,o.jsx)("div",{children:a})]})};const a=e=>{let{children:t}=e;return(0,o.jsx)("div",{className:"comment-list-module--list--556f9",children:t})},i=e=>{let{children:t}=e;return(0,o.jsx)("div",{className:"comment-list-module--item--9f430",children:t})},u=e=>{let{id:t,url:n,content:l,account:r}=e;return[t,{url:n,account:r,content:l}]};function d(e){let{id:t,account:n,url:l,content:r,replies:s}=e;return(0,o.jsx)(c,{account:n,url:l,content:r,children:(0,o.jsx)(a,{children:s.map((e=>(0,o.jsx)(i,{children:(0,o.jsx)(d,{...e})},e.id)))})})}const m=e=>{let{host:t,id:n}=e;const{0:r,1:s}=(0,l.useState)(null);return(0,l.useEffect)((()=>{let e=!1;return(async()=>{var l;const r=new Request(new URL("/api/v1/statuses/"+n+"/context","https://"+t)),o=await fetch(r);if(!o.ok)throw new Error(o.status+" "+o.statusText);if(e)return;const c=await o.json();if(e)return;const a=null!==(l=null==c?void 0:c.descendants)&&void 0!==l?l:null,i=(e=>e?new Map(e.map(u)):null)(a),d=(e=>{if(!e)return null;const t=new Map(e.map((e=>[e.in_reply_to_id,[]])));for(const{in_reply_to_id:n,id:l}of e)t.get(n).push(l);return t})(a),m=(e=>{var t;let{id:n,comments:l,replies:r}=e;return(null!==(t=r.get(n))&&void 0!==t?t:[]).map((function e(t){var n;return{id:t,...l.get(t),replies:(null!==(n=r.get(t))&&void 0!==n?n:[]).map(e)}}))})({id:n,comments:i,replies:d});s(m)})(),()=>e=!0}),[t,n]),r?(0,o.jsx)(a,{children:r.map((e=>(0,o.jsx)(i,{children:(0,o.jsx)(d,{...e})},e.id)))}):"Loading..."};var h=m}}]);
//# sourceMappingURL=564-a76ba160811967676b4f.js.map