{"version":3,"file":"755-5c3d1253a73b9ba543ff.js","mappings":"4MAGO,MAQMA,EAAaC,IACtB,MAAMC,EATiBD,KACvB,MAAM,GAAC,KAAEE,EAAI,KAAED,GAAO,EAACE,IAAYC,EAAAA,EAAAA,UAAS,CAAEF,KAAMF,EAAOC,KAAMD,IAIjE,OAHIA,IAAUE,GACVC,EAAS,CAAED,KAAMF,EAAOC,KAAMC,IAE3BD,CAAI,EAIEI,CAAYL,GACzB,OAAOC,IAASD,CAAK,E,sBCPzB,MAAMM,EAAO,CAAEC,cAAc,EAAMC,eAAe,GA2BlD,MAzBcC,KACV,MAAMC,GAAWC,EAAAA,EAAAA,KACXC,GAAWC,EAAAA,EAAAA,kBAAiBH,IAC5B,SAAEI,EAAQ,KAAEC,GAASH,EACrBI,EAAUjB,EAAWe,GAkB3B,OAhBAG,EAAAA,EAAAA,YAAU,KACN,IAAKD,EACD,OAEJ,GAAID,EACA,OAIJ,MAAMG,GAAUC,EAAAA,EAAAA,KACXD,GAILA,EAAQE,MAAMd,EAAK,GACnB,CAACS,EAAMD,EAAUE,IACd,IAAI,C","sources":["webpack://words-to-kick-your-teeth-out/./src/features/util/use-previous.js","webpack://words-to-kick-your-teeth-out/./src/features/focus/focus.jsx"],"sourcesContent":["import { useState } from \"react\";\n\n// FIXME this seems wrong\nexport const usePrevious = value => {\n    const [{ copy, prev }, setState] = useState({ copy: value, prev: value });\n    if (value !== copy) {\n        setState({ copy: value, prev: copy });\n    }\n    return prev;\n};\n\nexport const useChanged = value => {\n    const prev = usePrevious(value);\n    return prev !== value;\n};\n","import { useDeferredValue, useEffect } from \"react\";\nimport { useChanged } from \"@features/util\";\nimport { usePostLocation } from \"@features/post-location\";\nimport { getFocus } from \"./focus-ref.js\";\n\n// Gatsby already handles scroll, focus-visible for extra emphasis\nconst opts = { focusVisible: true, preventScroll: true };\n\nconst Focus = () => {\n    const location = usePostLocation();\n    const deferred = useDeferredValue(location);\n    const { pathname, hash } = deferred;\n    const changed = useChanged(pathname);\n\n    useEffect(() => {\n        if (!changed) {\n            return;\n        }\n        if (hash) {\n            return;\n        }\n\n        // FIXME useRef?\n        const current = getFocus();\n        if (!current) {\n            return;\n        }\n\n        current.focus(opts);\n    },  [hash, pathname, changed]);\n    return null;\n};\n\nexport default Focus;\n"],"names":["useChanged","value","prev","copy","setState","useState","usePrevious","opts","focusVisible","preventScroll","Focus","location","usePostLocation","deferred","useDeferredValue","pathname","hash","changed","useEffect","current","getFocus","focus"],"sourceRoot":""}