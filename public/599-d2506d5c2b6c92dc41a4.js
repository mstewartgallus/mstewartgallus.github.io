"use strict";(self.webpackChunkwords_to_kick_your_teeth_out=self.webpackChunkwords_to_kick_your_teeth_out||[]).push([[599],{1599:function(e,n,t){t.r(n),t.d(n,{default:function(){return p}});var r=t(7294),l=t(4218),s=t(5893);const o=e=>{let{children:n,heading:t,...o}=e;const c=(0,r.useId)();return(0,s.jsx)("section",{"aria-labelledby":c,...o,children:(0,s.jsxs)(l.Z,{children:[(0,s.jsx)("header",{id:c,children:(0,s.jsx)("hgroup",{children:t})}),n]})})};var c=t(7831),i=t(8771),d=t(7158);const a=e=>{let{url:n,display_name:t,acct:r}=e;const l=""!==t?t:r;return(0,s.jsx)("address",{children:(0,s.jsx)(d.A,{rel:"nofollow",href:n,children:l})})},u=e=>{let{url:n,account:t,content:l,children:o}=e;const c=(e=>(0,r.useMemo)((()=>(e=>`<!DOCTYPE html>\n<html>\n  <head>\n    <base target="_parent">\n    <meta name="color-scheme" content="dark light">\n    <link rel="stylesheet" href="/sandbox.css">\n  </head>\n  <body>${e}</body>\n</html>`)(e)),[e]))(l),{0:i,1:u}=(0,r.useState)(!1),m=(0,r.useCallback)((e=>{u(!0)}),[]),h=i?"comment-module--loaded--961c0":"comment-module--unloaded--35fb3";return(0,s.jsxs)("article",{className:"comment-module--comment--13767",children:[(0,s.jsxs)("header",{className:"comment-module--header--3b239",children:[(0,s.jsx)(a,{...t}),(0,s.jsx)(d.A,{rel:"nofollow",href:n,children:"#"})]}),(0,s.jsx)("iframe",{className:"comment-module--iframe--0ce46 "+h,allow:"",sandbox:"allow-top-navigation-by-user-activation",srcDoc:c,onLoad:m}),(0,s.jsx)("div",{children:o})]})};const m=e=>{let{children:n}=e;return(0,s.jsx)("div",{className:"comment-list-module--list--556f9",children:n})},h=e=>{let{children:n}=e;return(0,s.jsx)("div",{className:"comment-list-module--item--9f430",children:n})},x=e=>{let{id:n,url:t,content:r,account:l}=e;return[n,{url:t,account:l,content:r}]};function f(e){let{id:n,account:t,url:r,content:l,replies:o}=e;return(0,s.jsx)(u,{account:t,url:r,content:l,children:(0,s.jsx)(m,{children:o.map((e=>(0,s.jsx)(h,{children:(0,s.jsx)(f,{...e})},e.id)))})})}const j=e=>{let{host:n,id:t}=e;const{0:l,1:o}=(0,r.useState)(null);return(0,r.useEffect)((()=>{let e=!1;return(async()=>{var r;const l=new Request(new URL(`/api/v1/statuses/${t}/context`,`https://${n}`)),s=await fetch(l);if(!s.ok)throw new Error(`${s.status} ${s.statusText}`);if(e)return;const c=await s.json();if(e)return;const i=null!==(r=null==c?void 0:c.descendants)&&void 0!==r?r:null,d=(e=>e?new Map(e.map(x)):null)(i),a=(e=>{if(!e)return null;const n=new Map(e.map((e=>[e.in_reply_to_id,[]])));for(const{in_reply_to_id:t,id:r}of e)n.get(t).push(r);return n})(i),u=(e=>{var n;let{id:t,comments:r,replies:l}=e;return(null!==(n=l.get(t))&&void 0!==n?n:[]).map((function e(n){var t;return{id:n,...r.get(n),replies:(null!==(t=l.get(n))&&void 0!==t?t:[]).map(e)}}))})({id:t,comments:d,replies:a});o(u)})(),()=>e=!0}),[n,t]),l?(0,s.jsx)(m,{children:l.map((e=>(0,s.jsx)(h,{children:(0,s.jsx)(f,{...e})},e.id)))}):"Loading..."};var p=e=>{let{host:n,id:t}=e;return(0,s.jsx)(o,{heading:(0,s.jsx)(c.H2,{children:(0,s.jsx)(i.v,{id:"comments",href:"#comments",children:"Comments"})}),children:(0,s.jsx)(j,{host:n,id:t})})}}}]);
//# sourceMappingURL=599-d2506d5c2b6c92dc41a4.js.map