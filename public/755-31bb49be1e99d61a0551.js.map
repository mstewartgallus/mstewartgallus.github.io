{"version":3,"file":"755-31bb49be1e99d61a0551.js","mappings":"kOAMA,MAAMA,EAAO,CAAEC,cAAc,EAAMC,eAAe,GA0BlD,MAxBcC,KAEV,MAAM,SAAEC,EAAQ,KAAEC,IAASC,EAAAA,EAAAA,KACrBC,ECRiBC,KACvB,MAAM,GAAC,KAAEC,EAAI,KAAEC,GAAO,EAACC,IAAYC,EAAAA,EAAAA,UAAS,CAAEH,KAAMD,EAAOE,KAAMF,IAIjE,OAHIA,IAAUC,GACVE,EAAS,CAAEF,KAAMD,EAAOE,KAAMD,IAE3BC,CAAI,EDGUG,CAAYT,GAkBjC,OAhBAU,EAAAA,EAAAA,YAAU,KACN,GAAIT,EACA,OAEJ,GAAIE,IAAiBH,EACjB,OAIJ,MAAMW,GAAUC,EAAAA,EAAAA,KACXD,GAILA,EAAQE,MAAMjB,EAAK,GACnB,CAACK,EAAMD,EAAUG,IACd,IAAI,C","sources":["webpack://words-to-kick-your-teeth-out/./src/features/focus/focus.jsx","webpack://words-to-kick-your-teeth-out/./src/features/util/use-previous.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { usePrevious } from \"@features/util\";\nimport { usePostLocation } from \"@features/post-location\";\nimport { getFocus } from \"./focus-ref.js\";\n\n// Gatsby already handles scroll, focus-visible for extra emphasis\nconst opts = { focusVisible: true, preventScroll: true };\n\nconst Focus = () => {\n    // FIXME consider useDeferredValue ?\n    const { pathname, hash } = usePostLocation();\n    const prevPathname = usePrevious(pathname);\n\n    useEffect(() => {\n        if (hash) {\n            return;\n        }\n        if (prevPathname === pathname) {\n            return;\n        }\n\n        // FIXME useRef?\n        const current = getFocus();\n        if (!current) {\n            return;\n        }\n\n        current.focus(opts);\n    },  [hash, pathname, prevPathname]);\n    return null;\n};\n\nexport default Focus;\n","import { useState } from \"react\";\n\n// FIXME this seems wrong\nexport const usePrevious = value => {\n    const [{ copy, prev }, setState] = useState({ copy: value, prev: value });\n    if (value !== copy) {\n        setState({ copy: value, prev: copy });\n    }\n    return prev;\n};\n"],"names":["opts","focusVisible","preventScroll","Focus","pathname","hash","usePostLocation","prevPathname","value","copy","prev","setState","useState","usePrevious","useEffect","current","getFocus","focus"],"sourceRoot":""}