{"version":3,"file":"550-06c191908973c0aafcb5.js","mappings":"8NAKA,MAAMA,EAAO,CAAEC,cAAc,EAAMC,eAAe,GAErCC,EAAQA,KAAO,IAADC,EACvB,MAAMC,GAAKC,EAAAA,EAAAA,KAOLC,GAAKC,EAAAA,EAAAA,kBAAiBH,IAEtB,KAAEI,EAAO,GAAE,SAAEC,EAAW,IAAOH,aAAE,EAAFA,EAAII,SACnCC,EAAeL,SAAgB,QAAdH,EAAFG,EAAIM,oBAAY,IAAAT,OAAd,EAAFA,EAAkBM,SAwBvC,OAtBAI,EAAAA,EAAAA,YAAU,KACN,IAAKF,EACD,OAGJ,GAAIH,EAAM,CACN,MAAMM,EAAOC,SAASC,eAAeR,EAAKS,MAAM,IAEhD,YADAH,SAAAA,EAAMI,MAAMnB,GAEhB,CAEA,GAAIY,IAAiBF,EACjB,OAGJ,MAAMU,GAAUC,EAAAA,EAAAA,KACXD,GAILA,EAAQD,MAAMnB,EAAK,GACpB,CAACY,EAAcF,EAAUD,IACrB,IAAI,EAGf,W","sources":["webpack://words-to-kick-your-teeth-out/./src/features/focus/focus.jsx"],"sourcesContent":["import { useDeferredValue, useEffect } from \"react\";\nimport { usePrevLocation } from \"./prev-location.js\";\nimport { getFocus } from \"./focus-ref.js\";\n\n// Gatsby already handles scroll, focus-visible for extra emphasis\nconst opts = { focusVisible: true, preventScroll: true };\n\nexport const Focus = () => {\n    const xs = usePrevLocation();\n    // Not sure if deferring focus here makes sense\n\n    // It's not great but at least sometimes we get the focusing\n    // happening a little bit AFTER the the view transition\n    // animations starts and we don't get forced reflow.\n\n    const ys = useDeferredValue(xs);\n\n    const { hash = '', pathname = '' } = ys?.location;\n    const prevPathname = ys?.prevLocation?.pathname;\n\n    useEffect(() => {\n        if (!prevPathname) {\n            return;\n        }\n\n        if (hash) {\n            const elem = document.getElementById(hash.slice(1));\n            elem?.focus(opts);\n            return;\n        }\n\n        if (prevPathname === pathname) {\n            return;\n        }\n\n        const current = getFocus();\n        if (!current) {\n            return;\n        }\n\n        current.focus(opts);\n    }, [prevPathname, pathname, hash]);\n    return null;\n};\n\nexport default Focus;\n"],"names":["opts","focusVisible","preventScroll","Focus","_ys$prevLocation","xs","usePrevLocation","ys","useDeferredValue","hash","pathname","location","prevPathname","prevLocation","useEffect","elem","document","getElementById","slice","focus","current","getFocus"],"sourceRoot":""}