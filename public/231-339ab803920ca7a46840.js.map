{"version":3,"file":"231-339ab803920ca7a46840.js","mappings":"0LAuCA,UAfuBA,KACnB,MAAM,SAAEC,IAAaC,EAAAA,EAAAA,eAWrB,OAVAC,EAAAA,EAAAA,YAAU,KACN,IAAKC,OAAOC,aAAeC,SAASC,oBAChC,OAEJ,MAAMC,EAAQ,IAAIC,iBACZ,OAAEC,GAAWF,EACbG,EAAU,CAAEC,SAAS,EAAMF,UAEjC,OADAN,OAAOC,WAAWQ,iBAAiB,WA7BxBC,EAACb,EAAQc,KAAA,IAAE,OAAEL,GAAQK,EAAA,OAAKC,IACzC,MAAM,YAAEC,EAAW,aAAEC,EAAY,gBAAEC,GAAoBH,EAEvD,IAAKE,GAAgBC,EACjB,OAGJ,GAAI,IAAIC,IAAIH,EAAYI,KAAKpB,WAAaA,EACtC,OAGJ,MAAMqB,GAAgBC,EAAAA,EAAAA,IAAY,CAAEb,WAC9Bc,GAAuBC,EAAAA,EAAAA,IAAmB,CAAEf,WAElDJ,SAASC,qBAAoB,IAAMmB,QAAQC,KAAK,CAC5CH,EACAF,KACD,CACN,EAWsDR,CAAWb,EAAU,CAAES,WAAWC,GAC1E,IAAMH,EAAMA,OAAO,GAC3B,CAACP,IACG,IAAI,C","sources":["webpack://words-to-kick-your-teeth-out/./src/features/view-transition/view-transition.jsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useLocation } from \"@gatsbyjs/reach-router\";\nimport { routeUpdate, routeUpdateDelayed } from \"./listeners.js\";\n\nconst onNavigate = (pathname, { signal }) => e => {\n    const { destination, canIntercept, downloadRequest } = e;\n\n    if (!canIntercept || downloadRequest) {\n        return;\n    }\n\n    if (new URL(destination.url).pathname === pathname) {\n        return;\n    }\n\n    const routeUpdatePs = routeUpdate({ signal });\n    const routeUpdateDelayedPs = routeUpdateDelayed({ signal });\n    // FIXME update focus AFTER transition\n    document.startViewTransition(() => Promise.race([\n        routeUpdateDelayedPs,\n        routeUpdatePs\n    ]));\n};\n\nconst ViewTransition = () => {\n    const { pathname } = useLocation();\n    useEffect(() => {\n        if (!window.navigation || !document.startViewTransition) {\n            return;\n        }\n        const abort = new AbortController();\n        const { signal } = abort;\n        const options = { passive: true, signal };\n        window.navigation.addEventListener('navigate', onNavigate(pathname, { signal }), options);\n        return () => abort.abort();\n    }, [pathname]);\n    return null;\n};\n\nexport default ViewTransition;\n"],"names":["ViewTransition","pathname","useLocation","useEffect","window","navigation","document","startViewTransition","abort","AbortController","signal","options","passive","addEventListener","onNavigate","_ref","e","destination","canIntercept","downloadRequest","URL","url","routeUpdatePs","routeUpdate","routeUpdateDelayedPs","routeUpdateDelayed","Promise","race"],"sourceRoot":""}