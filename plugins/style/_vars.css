@charset "utf-8";

/* Typecheck custom properties for extra safety, speed?, no fancy features here */
@supports (background: paint(something)) {
    @property --ex-height {
        syntax: '<number>';
        initial-value: 0.5 ;
    }
    @property --line-height {
        syntax: '<number>';
        initial-value: 1.6 ;
    }
    @property --line {
        syntax: '<length>';
        initial-value: 1.6rem ;
    }

    @property --measure {
        syntax: '<length>';
        initial-value: 30rem ;
    }
    @property --main-width {
        syntax: '<length>';
        initial-value: 35rem ;
    }

    @property --min-width {
        syntax: '<number>';
        initial-value: 300 ;
    }

    @property --width-delta {
        syntax: '<number>';
        initial-value: 1500 ;
    }
    @property --max-width {
        syntax: '<number>';
        initial-value: 2000 ;
    }

    @property --min-font-size {
        syntax: '<number>';
        initial-value: 16 ;
    }
    @property --max-font-size {
        syntax: '<number>';
        initial-value: 30 ;
    }

    @property --ratio-1 {
        syntax: '<number>';
        initial-value: 1.5 ;
    }

    @property --canvas {
        syntax: '<color>';
        initial-value: Canvas ;
    }
    @property --canvas-text {
        syntax: '<color>';
        initial-value: CanvasText ;
    }

    @property --gray-text {
        syntax: '<color>';
        initial-value: GrayText ;
    }

    @property --selected-item {
        syntax: '<color>';
        initial-value: SelectedItem ;
    }
    @property --selected-item-text {
        syntax: '<color>';
        initial-value: SelectedItemText ;
    }

    @property --highlight {
        syntax: '<color>';
        initial-value: Highlight ;
    }
    @property --highlight-text {
        syntax: '<color>';
        initial-value: HighlightText ;
    }

    @property --mark {
        syntax: '<color>';
        initial-value: Mark ;
    }
    @property --mark-text {
        syntax: '<color>';
        initial-value: MarkText ;
    }

    @property --link-text {
        syntax: '<color>';
        initial-value: LinkText ;
    }
    @property --visited-text {
        syntax: '<color>';
        initial-value: VisitedText ;
    }
    @property --active-text {
        syntax: '<color>';
        initial-value: ActiveText ;
    }

    @property --accent-color {
        syntax: '<color>';
        initial-value: AccentColor ;
    }
    @property --accent-color-text {
        syntax: '<color>';
        initial-value: AccentColorText ;
    }

    @property --button-border {
        syntax: '<color>';
        initial-value: ButtonBorder ;
    }
    @property --button-face {
        syntax: '<color>';
        initial-value: ButtonFace ;
    }
    @property --button-text {
        syntax: '<color>';
        initial-value: ButtonText ;
    }

    @property --field {
        syntax: '<color>';
        initial-value: Field ;
    }
    @property --field-text {
        syntax: '<color>';
        initial-value: FieldText ;
    }

    @property --emphasis-text {
        syntax: '<color>';
        initial-value: CanvasText ;
    }
    @property --green-text {
        syntax: '<color>';
        initial-value: CanvasText ;
    }
}

:root {
    /* Noto Sans x height :( */
    --ex-height: 0.536 ;

    /* Compute legible line height in terms of rems */
    /* https://www.smashingmagazine.com/2020/07/css-techniques-legibility/ */
    --line-height: calc(var(--ex-height) / 0.32) ;
    --line: calc(var(--line-height) * 1rem) ;

    --measure: 29.75757rem ;
    --main-width: 33.353535rem ;

    --min-width: 320 ;
    /* to work around weird CSS silliness with division
     * we need a <number>
     */
    --width-delta: 1500 ;
    --max-width: calc(var(--min-width) + var(--width-delta)) ;

    --min-font-size: 19 ;
    --max-font-size: 24 ;

    --ratio-1: calc(4/3) ;
}

/* Unfortunately lab/oklab and such aren't so supported yet. HSL is */

/* easier to make relatively consistent lightness but still not */
/* perceptually uniform. */

/* https://accessiblepalette.com/?lightness=97,79,75,23,11,57.8,48,40.2,31.8,10&b90000=1,29&dc0000=1,0&744e42=1,0&eed15c=1,-30&00FF00=1,0&0000c1=1,-20&ff00ce=1,0&2b3429=1,0 */

:root {
    --canvas: Canvas ;
    --canvas-text: CanvasText ;

    --gray-text: GrayText ;

    --selected-item: SelectedItem ;
    --selected-item-text: SelectedItemText ;

    --highlight: Highlight ;
    --highlight-text: HighlightText ;

    --mark: Mark ;
    --mark-text: MarkText ;

    --link-text: LinkText ;
    --visited-text: VisitedText ;
    --active-text: ActiveText ;

    --accent-color: AccentColor ;
    --accent-color-text: AccentColorText ;

    --button-border: ButtonBorder ;
    --button-face: ButtonFace ;
    --button-text: ButtonText ;

    --field: Field ;
    --field-text: FieldText ;

    --emphasis-text: CanvasText ;
    --green-text: CanvasText ;
}

@media print {
    :root {
        --link-text: CanvasText ;
        --visited-text: CanvasText ;
        --active-text: CanvasText ;
    }
}

/* black/pink and dark green/yellow is most legible ? */
/* Ensuring color legibility, T. H. Nilsson */
/* https://files.upei.ca/arts/psychology/nilsson_color.pdf */
@media screen and (forced-colors: none) {
    :root {
        --canvas: #FFF4F1 ;
        --canvas-text: black ;

        --emphasis-text: #6B180A ;
        --green-text: #003A00 ;

        --gray-text: grey ;

        --mark: yellow ;
        --mark-text: black ;

        --accent-color: #2D1200 ;
        --accent-color-text: white ;

        --selected-item: hsl(225deg 40% 31%);
        --selected-item-text: white ;

        --link-text: #0024CD ;
        --visited-text: #5F1B4E ;
        --active-text: hsl(0deg 100% 50%);

        --highlight: #FFA090;
        --highlight-text:  #003A00 ;

        --field: #FFF2D6 ;
        --field-text: #2D1200 ;

        --button-face: #FFF2D6 ;
        --button-text: #2D1200 ;
        --button-border: #2D1200 ;
    }
}

@media screen and (prefers-color-scheme: dark) and (forced-colors: none) {
    :root {
        --canvas: #1A1F19 ;
        --canvas-text: #FFEFCC ;

        --gray-text: #A3A7A1 ;

        --mark: hsl(48deg 100% 31%);
        --mark-text: white ;

        --emphasis-text: #FFA088 ;
        --green-text: hsl(90deg 43% 69%);

        --accent-color: hsl(88deg 100% 59%);
        --accent-color-text: black ;

        --selected-item: hsl(188deg 100% 56%);
        --selected-item-text: black ;

        --link-text: #CBBCF2 ;
        --visited-text: #FFA8E3 ;
        --active-text: hsl(346deg 100% 59%);

        --highlight: black ;
        --highlight-text: #17E30E ;

        --field: hsl(250deg 80% 10%);
        --field-text: hsl(270deg 70% 90%);

        --button-face: black ;
        --button-text: white ;
        --button-border: white ;
    }
}
