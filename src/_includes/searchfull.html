{%- assign categories = site.categories | sort -%}
{%- assign tags = site.tags | sort -%}

{%- capture title -%}
{{- site.data.strings.search.title | escape -}}
{%- endcapture -%}

<form role="search" aria-labelledby="search-title" id="search"
      rel="search" role="search" action="{% link search.html %}"
      aria-labelledby="search-title">
  {%- include subheader.html id='search-title' title=title -%}

  <fieldset class="search-basic">
    <label for="search-input">{{ site.data.strings.search.query | escape }}</label>
    <input id="search-input" name="s" type="search"
           ><button id="search-button" type="submit">{{ site.data.strings.search.submit | escape }}</button>
  </fieldset>

  <fieldset id="category">
    <legend>{{ site.data.strings.sidebar.search.category | escape }}</legend>
    {%- for category in categories %}
    <input id="category-{{ category[0] | escape }}" type="checkbox" name="category"
           value="{{ category[0] | escape }}">
    <label for="category-{{ category[0] | escape }}">{{ category[0] | escape }}</label>
    {%- endfor -%}
  </fieldset>

  <fieldset id="place">
    <legend>{{ site.data.strings.search.place | escape }}</legend>
    {%- for place in site.places %}
    <input id="place-{{ place | escape }}" type="checkbox" name="place"
           value="{{ place | escape }}">
    <label for="place-{{ place | escape }}">#{{ place | escape }}</label>
    {%- endfor -%}
  </fieldset>

  <fieldset id="character" tabindex="0">
    <legend>{{ site.data.strings.search.character | escape }}</legend>
    {%- for character in site.characters %}
    <input id="character-{{ character | escape }}" type="checkbox" name="character"
           value="{{ character | escape }}">
    <label for="character-{{ character | escape }}">#{{ character | escape }}</label>
    {%- endfor -%}
  </fieldset>

  <fieldset id="tag" tabindex="0">
    <legend>{{ site.data.strings.search.tag | escape }}</legend>
    {%- for tag in tags %}
    <input id="tag-{{ tag[0] | escape }}" type="checkbox" name="tag"
           value="{{ tag[0] | escape }}">
    <label for="tag-{{ tag[0] | escape }}">#{{ tag[0] | escape }}</label>
    {%- endfor -%}
  </fieldset>
</form>
