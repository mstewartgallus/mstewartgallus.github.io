{%- assign categories = site.categories | sort -%}
{%- assign tags = site.tags | sort -%}

<form id="search" name="search" rel="search" role="search" action="{% link search.html %}">
  <header class="sr-only">
    <hgroup>
      <h2 id="search-title" itemprop="name">{{ site.data.strings.sidebar.search.title | escape }}</h2>
    </hgroup>
  </header>

  <fieldset class="search-basic">
    <label for="search-input">{{ site.data.strings.sidebar.search.query | escape }}</label>:
    <input id="search-input" name="s" type="search"
           ><button id="search-button" type="submit">{{ site.data.strings.sidebar.search.submit | escape }}</button>
  </fieldset>

  <fieldset id="category">
    <legend>{{ site.data.strings.sidebar.search.category | escape }}</legend>
    {%- for category in categories %}
    <input id="category-{{ category[0] | cgi_escape }}" type="checkbox" name="category"
           value="{{ category[0] | cgi_escape }}">
    <label for="category-{{ category[0] | cgi_escape }}">{{ category[0] | escape }}</label>
    {%- endfor -%}
  </fieldset>

  <fieldset id="tag" tabindex="0">
    <legend>{{ site.data.strings.sidebar.search.tag | escape }}</legend>
    {%- for tag in tags %}
    <input id="tag-{{ tag[0] | cgi_escape }}" type="checkbox" name="tag"
           value="{{ tag[0] | cgi_escape }}">
    <label for="tag-{{ tag[0] | cgi_escape }}">#{{ tag[0] | escape }}</label>
    {%- endfor -%}
  </fieldset>
</form>
