{%- capture maintype -%}
{%- if page.collection == 'posts' -%}
https://schema.org/BlogPosting
{%- elsif page.name == 'index.html' -%}
https://schema.org/Blog
{%- else -%}
https://schema.org/WebContent
{%- endif -%}
{%- endcapture -%}
{%- capture pagetype -%}
{%- if page.name == 'about.html' -%}
https://schema.org/AboutPage
{%- elsif page.name == 'search.html' -%}
https://schema.org/SearchResultsPage
{%- elsif page.collection == 'posts' -%}
https://schema.org/ItemPage
{%- else -%}
https://schema.org/WebPage
{%- endif -%}
{%- endcapture -%}
{%- capture itemprop -%}
{%- if maintype != 'https://schema.org/Blog' -%}
itemprop="articleBody"
{%- endif -%}
{%- endcapture -%}
<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}"
      itemscope
      itemtype="{{ pagetype }}"
      itemid="{{ page.url | absolute_url }}">
  <head>
    {%- include head.html -%}
  </head>
  <body itemscope
        itemprop="mainEntity hasPart"
        itemtype="{{ maintype }}"
        itemid="{{ page.url | absolute_url }}">
    <header>
      {%- include header.html -%}
    </header>
    <main aria-describedby="title" itemprop="text">
      <header>
        <hgroup>
          <h1 id="title" itemprop="name headline title">{{- page.title | escape -}}</h1>
          {%- if page.subtitle -%}
          <p itemprop="subheading">{{- page.subtitle | escape -}}</p>
          {%- endif -%}
        </hgroup>
      </header>
      <div {{ itemprop }}>
        {{- content -}}
      </div>
    </main>
    {%- include paging.html -%}
    {%- include breadcrumbs.html -%}
    {%- include metadata.html -%}
  </body>
</html>
