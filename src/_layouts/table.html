{%- assign date_id_format = "%Y-%m-%d" -%}
{%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
{%- assign categories = site.categories | sort -%}
{%- assign tags = site.tags | sort -%}
<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}"
      id="page" itemprop="hasPart mainEntity" itemtype="http://schema.org/WebPage" itemscope>
  <head>
    {%- include head.html -%}
  </head>
  <body itemtype="http://schema.org/Blog" itemscope>
    <nav itemtype="http://schema.org/Blog" itemscope>
      {%- include nav.html -%}
    </nav>

    <article>
      {%- if page.title -%}
      <header>
        <a rel="bookmark" href="{{ page.url | relative_url }}" itemprop="url">
          <h1 itemprop="name headline">{{ page.title | escape }}</h1>
        </a>
      </header>
      {%- endif -%}

      {{ content }}
    </article>

    {%- if site.posts.size > 0 -%}

    <main aria-label="Content">
      <ol class="post-list" reversed="true" role="list">
        {%- for post in paginator.posts -%}
        <li
          itemprop="hasPart blogPost"
          itemscope
          itemtype="http://schema.org/BlogPosting"
          itemid="{{ post.url | absolute_url }}">
          <a itemprop="url" href="{{ post.url | relative_url }}">
            <span itemprop="name headline">{{ post.title | escape }}</span>
          </a>

          <ul class="metadata">
            <li>
              <time datetime="{{ post.date | date_to_xmlschema }}" itemprop="datePublished">
                {{ post.date | date: date_format }}
              </time>
            </li>
            {%- for category in post.categories -%}
            <li itemprop="articleSection"><a rel="tag" href="{{ category | relative_url }}">{{ category | escape }}</a></li>
            {%- endfor -%}
            {%- for tag in post.tags -%}
            <li itemprop="keywords">{{ tag | escape }}</li>
            {%- endfor -%}
          </ul>
          <span itemprop="creator author" itemscope itemtype="http://schema.org/Person">
            <link itemprop="url" href="{{ post.author.url | relative_url }}">
            <meta itemprop="name" content="{{ post.author.name | escape }}">
          </span>
        </li>
        {%- endfor -%}
      </ol>
    </main>
    {%- endif -%}
  </body>
</html>
