{%- assign date_id_format = "%Y-%m-%d" -%}
{%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}"
      id="page" itemprop="hasPart mainEntity" itemtype="http://schema.org/WebPage" itemscope>
  <head>
    {%- include head.html -%}
  </head>
  <body itemprop="hasPart mainEntity" itemtype="http://schema.org/Blog" itemscope>
    <header class="home"
         itemref="page"
         itemtype="http://schema.org/WebSite"
         itemscope>
      {%- if site.title -%}
      <a rel="bookmark" href="{{ page.url | relative_url }}" itemprop="url">
        <h1 itemprop="name">{{ site.title | escape }}</h1>
      </a>
      {%- endif -%}

      <div itemprop="description">
        {{ site.description | escape }}
      </div>

      <address itemprop="author" itemscope itemtype="https://schema.org/Person">
        <a itemprop="url" rel="author" href="{{ page.author.url | relative_url}}">
          @<span itemprop="name">{{ site.author.name | escape }}</span>
        </a>
      </address>
    </header>

    <article>
      {%- if page.title -%}
      <header>
        <a rel="bookmark" href="{{ page.url | relative_url }}" itemprop="url">
          <h2 itemprop="name headline">{{ page.title | escape }}</h2>
        </a>
      </header>
      {%- endif -%}

      {{ content }}
    </article>

    {%- if site.posts.size > 0 -%}
    <header>
      <a href="#contents">
        <h2 id="contents">Contents</h2>
      </a>
    </header>

    <main aria-label="Content">
      <ol reversed role="list" class="post-list">
        {%- for post in site.posts -%}
        <li
          itemprop="hasPart blogPost"
          itemscope
          itemtype="http://schema.org/BlogPosting"
          itemid="{{ post.url | absolute_url }}">
          <header>
            <a itemprop="url" href="{{ post.url | relative_url }}">
              <h3 itemprop="name headline">{{ post.title | escape }}</h3>
            </a>
          </header>

          <dl class="metadata">
            <dt>Posted</dt>
            <dd>
              <time datetime="{{ post.date | date_to_xmlschema }}" itemprop="datePublished">
                {{ post.date | date: date_format }}
              </time>
            </dd>
            {%- for category in post.categories -%}
            {%- if forloop.first -%}<dt>Category</dt>{%- endif -%}
            <dd itemprop="articleSection">
              <a href="{{ "/search" | relative_url }}?category={{ category | escape }}">{{ category | escape }}</a>
            </dd>
            {%- endfor -%}
            {%- for tag in post.tags -%}
            {%- if forloop.first -%}<dt>Tag</dt>{%- endif -%}
            <dd>
              <a href="{{ "/search" | relative_url }}?tag={{ tag | escape }}">
                #<span itemprop="keywords">{{ tag | escape }}<span>
              </a>
            </dd>
            {%- endfor -%}
          </dl>
          <span itemprop="creator author" itemscope itemtype="http://schema.org/Person">
            <link itemprop="url" href="{{ post.author.url | relative_url }}">
            <meta itemprop="name" content="{{ post.author.name | escape }}">
          </span>
        </li>
        {%- endfor -%}
      </ol>
    </main>
    {%- endif -%}
  </body>
</html>
