{%- assign date_id_format = "%Y-%m-%d" -%}
{%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}"
      id="page" itemprop="hasPart mainEntity" itemtype="http://schema.org/WebPage" itemscope>
  <head>
    {%- include head.html -%}
  </head>
  <body itemprop="hasPart mainEntity" itemtype="http://schema.org/Blog" itemscope>
    <article class="home"
             itemref="page"
             itemtype="http://schema.org/WebSite"
             itemscope>
      <header>
        {%- if site.title -%}
        <a rel="bookmark" href="{{ page.url | relative_url }}" itemprop="url">
          <h1 itemprop="name">{{ site.title | escape }}</h1>
        </a>
        {%- endif -%}
      </header>

      <div itemprop="description">
        {{ site.description | escape }}
      </div>

      <address itemprop="author" itemscope itemtype="https://schema.org/Person">
        <a itemprop="url" rel="author" href="{{ page.author.url | relative_url}}">
          <span itemprop="name">{{ site.author.name | escape }}</span>
        </a>
      </address>
    </article>

    <article>
      {%- if page.title -%}
      <header>
        <a rel="bookmark" href="{{ page.url | relative_url }}" itemprop="url">
          <h2 itemprop="name headline">{{ page.title | escape }}</h2>
        </a>
      </header>
      {%- endif -%}

      {{ content }}
    </article>

    {%- if site.posts.size > 0 -%}
    <header>
      <a href="#contents">
        <h2 id="contents" class="post-list-heading">Contents</h2>
      </a>
    </header>

    <main aria-label="Content">
      <ol class="post-list" reversed="true" role="list">
        {%- for post in site.posts -%}
        <li
          itemprop="hasPart blogPost"
          itemscope
          itemtype="http://schema.org/BlogPosting"
          itemid="{{ post.url | absolute_url }}">
          <a itemprop="url" href="{{ post.url | relative_url }}">
            <h3 itemprop="name headline">{{ post.title | escape }}</h3>
          </a>

          <ul class="metadata">
            <li>
              <time datetime="{{ post.date | date_to_xmlschema }}" itemprop="datePublished">
                {{ post.date | date: date_format }}
              </time>
            </li>
            {%- for category in post.categories -%}
            <li itemprop="articleSection">
              <a href="{{ "/search" | relative_url }}?category={{ category | escape }}">{{ category | escape }}</a>
            </li>
            {%- endfor -%}
            {%- for tag in post.tags -%}
            <li itemprop="keywords">
              <a href="{{ "/search" | relative_url }}?tag={{ tag | escape }}">{{ tag | escape }}</a>
            </li>
            {%- endfor -%}
          </ul>
          <span itemprop="creator author" itemscope itemtype="http://schema.org/Person">
            <link itemprop="url" href="{{ post.author.url | relative_url }}">
            <meta itemprop="name" content="{{ post.author.name | escape }}">
          </span>
        </li>
        {%- endfor -%}
      </ol>
    </main>
    {%- endif -%}
  </body>
</html>
