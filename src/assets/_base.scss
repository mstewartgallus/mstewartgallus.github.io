* {
    box-sizing: border-box ;
}

$root-font-size: $font-size * 1pt ;
:root {
    line-height: $line ;
    font-size: $root-font-size ;
    font-variant-numeric: proportional-nums oldstyle-nums ;
    font-synthesis: none ;

    // more legible hyperlinks
    text-underline-position: under ;

    @include font-size-adjust(none);
    @include hyphens(auto) ;
}


@media (prefers-reduced-motion: no-preference) {
    :root {
        scroll-behavior: smooth ;
    }
}


:root {
    font-family: 'Atkinson Hyperlegible', sans-serif ;
}
code, pre {
    font-family: 'JetBrains Mono', monospace ;
}
// Atkinson Hyperlegible doesn't have small caps :(
cite, abbr, body > header {
    font-family: 'Noto Sans', sans-serif ;
}


nav,header,footer,h1,h2,h3,h4,h5,h6 {
    font-variant-numeric: proportional-nums lining-nums ;
    @include hyphens(manual) ;
}

code, pre, table, li::marker {
    font-variant-numeric: lining-nums tabular-nums;
}

sub {
    font-variant-position: sub ;
}
sup {
    font-variant-position: super ;
}
sub, sup {
    vertical-align: inherit ;
}

p {
    margin-block: $line ;
}

hr {
    margin-block: 0 ;
}

hr, p, figure {
    inline-size: $width ;
    max-inline-size: 100% ;
}

h1, h2, h3, h4, h5, h6 {
    max-inline-size: 100% ;
}

// provide some sensible defaults for line spacing, etc..
h1,h2,h3,h4,h5,h6 {
    line-height: $line / scale(1) ;
    font-size: scale(1) * 1em ;
    font-weight: 700 ;
    inline-size: $width / scale(1) ;
}

h1 {
    font-size: scale(3) * 1em ;
    inline-size: $width / scale(3) ;
    line-height: $line / scale(3) ;
    margin-block: $line / scale(3) ;
}
h2 {
    font-size: scale(2) * 1em ;
    inline-size: $width / scale(2) ;
    line-height: $line / scale(2) ;
    margin-block: $line / scale(2) ;
}

dl, dd {
    margin: 0;
}
dt, dd {
    display: inline ;
}
dd::before {
    content: "\2002" ;
}
dt + dd::before {
    content: none ;
}
dt ~ dt::before {
    content: "\a" ;
    white-space: pre ;
}
dt::after {
    content: "\2003" ;
}

table {
    border-collapse: collapse ;
}

@counter-style nodot {
  system: numeric;
  symbols: "0" "1" "2" "3" "4" "5" "6" "7" "8" "9";
  suffix: "\2003";
}
@counter-style bullet {
  system: cyclic;
  symbols: "â€¢";
  suffix: "\2003";
}

ul, ol, menu {
    margin-block: $line ;
}

ol {
    list-style-type: nodot ;
}

ul {
    list-style-type: bullet ;
}

ul, ol {
    padding-inline-start: 0 ;
}
:is(ul, ol) > li {
    inline-size: $width ;
    max-inline-size: 100% ;
}

$list-width: $width - 3.4ch ;
@media screen and (max-width: $A4-width) {
    ul, ol {
        padding-inline-start: 3.4ch ;
    }
    :is(ul, ol) > li {
        inline-size: $list-width ;
        max-inline-size: 100% ;
    }
}

abbr {
    @include all-small-caps ;
    text-decoration: none ;
}
cite {
    @include small-caps ;
}

figure {
    margin-block: $line ;
}
figcaption {
    font-weight: bold ;
}

* {
    outline-offset: 0.1em;
    outline-width: 0.2em ;
}

:focus {
    outline-style: solid ;
}

header, figure {
    position: relative ;
}

:is(header, figure) a[rel~="bookmark"] {
    position: absolute ;
    inset-inline-start: -2ch;
}

header a[rel~="bookmark"] {
    inset-block-start: 0;
}
figure a[rel~="bookmark"] {
    inset-block-end: 0;
}

@media screen and (max-width: $A4-width) {
    :is(header, figure) a[rel~="bookmark"] {
        inset-inline-start: 0 ;
    }
    a[rel~="bookmark"] + :is(hgroup, figcaption) {
        padding-inline-start: 1.5ch ;
    }
}
